(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{171:function(e,t,n){var content=n(173);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(49).default)("402bac5d",content,!0,{sourceMap:!1})},172:function(e,t,n){"use strict";var o=n(171);n.n(o).a},173:function(e,t,n){(e.exports=n(48)(!1)).push([e.i,".button[data-v-859c1512]{margin-bottom:1.5rem}",""])},174:function(e,t,n){"use strict";n.r(t);n(33),n(15),n(46),n(47),n(99);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=new DOMParser;function r(e,t){return c.parseFromString(e,"application/xml").getElementsByTagName(t)}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl="https://video.google.com/timedtext?"}var t,n,c;return t=e,(n=[{key:"getLanguagesByUrl",value:function(e){var t=this,n=this.getVideoIdByUrl(e),o="".concat(this.baseUrl,"type=list&v=").concat(n);return fetch(o).then(function(e){return e.text()}).then(function(e){var track=r(e,"track");return t.languages=function(track){var e=[];if(track.length<=0)return e;for(var t=0;t<track.length;t++){var n=track[t],o="true"===n.getAttribute("lang_default"),c={name:n.getAttribute("name")||"",label:n.getAttribute("lang_original")||"",code:n.getAttribute("lang_code")||"",default:o};e.push(c)}return e}(track),t.languages}).catch(function(e){return t.languages=[],e})}},{key:"getVideoIdByUrl",value:function(e){var t=e.match(/v=(.*?)(&|$)/);return!t||t.length<=0||!e.includes("https://www.youtube.com")?"":t[1]}},{key:"getCaption",value:function(e,t,n){var o="".concat(this.baseUrl||"","name=").concat(t||"")+"&hl=".concat(t||"")+"&lang=".concat(n||"")+"&v=".concat(e||"");return fetch(o).then(function(e){return e.text()}).then(function(e){for(var text=r(e,"text"),caption="",t=0;t<text.length;t++)caption+=text[t].textContent+"\n";return caption})}}])&&o(t.prototype,n),c&&o(t,c),e}()),d=document,f={name:"PageIndex",components:{},data:function(){return{languages:[],selectedLanguageCode:"",caption:"",notification:{success:!1,failed:!1}}},computed:{videoUrl:{get:function(){return this.$store.state.videoUrl},set:function(e){this.$store.commit("setVideoUrl",e)}},videoId:function(){return l.getVideoIdByUrl(this.videoUrl)},enabledLanguages:function(){return this.languages.length>0},enabledCaption:function(){return!!this.caption}},watch:{videoUrl:function(e){this.updateVideoUrl(e)},selectedLanguageCode:function(e){var t=this,n=this.getLangudegeNamebyCode(e);l.getCaption(this.videoId,n,e).then(function(caption){t.caption=caption}).catch(function(e){t.caption="",console.error(e)})},languages:{deep:!0,handler:function(e){var t=this;this.selectedLanguageCode="",e.forEach(function(e){e.default&&(t.selectedLanguageCode=e.code)})}}},methods:{updateVideoUrl:function(e){var t=this;l.getLanguagesByUrl(e).then(function(e){t.languages=e}).catch(function(e){t.languages=[],t.selectedLanguageCode="",console.error(e)})},getLangudegeNamebyCode:function(e){var t="";return this.languages.forEach(function(n){n.code===e&&(t=n.name)}),t},showNotification:function(e,time){var t=this;this.notification[e]=!0,setTimeout(function(){t.notification[e]=!1},time||3e3)},copyCaption:function(){!function(e){var textarea=d.createElement("textarea");textarea.value=e,textarea.selectionStart=0,textarea.selectionEnd=textarea.value.length;var s=textarea.style;s.position="fixed",s.left="-100%",d.body.appendChild(textarea),textarea.focus();var t=d.execCommand("copy");return textarea.blur(),d.body.removeChild(textarea),t}(this.caption)?this.showNotification("failed"):this.showNotification("success")}},created:function(){this.updateVideoUrl(this.videoUrl)}},h=(n(172),n(23)),component=Object(h.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"section"},[n("b-field",{attrs:{label:"Video URL"}},[n("b-input",{attrs:{placeholder:"https://www.youtube.com/watch?v=XXXXXXXXXXX",type:"url"},model:{value:e.videoUrl,callback:function(t){e.videoUrl=t},expression:"videoUrl"}})],1),e._v(" "),e.enabledCaption?[n("b-field",{attrs:{label:"Language"}},[n("b-select",{attrs:{placeholder:"Select a language"},model:{value:e.selectedLanguageCode,callback:function(t){e.selectedLanguageCode=t},expression:"selectedLanguageCode"}},e._l(e.languages,function(t){return n("option",{key:t.code,domProps:{value:t.code}},[e._v(e._s(t.label))])}),0)],1),e._v(" "),n("b-field",{attrs:{label:"Caption"}},[n("b-input",{attrs:{type:"textarea"},model:{value:e.caption,callback:function(t){e.caption=t},expression:"caption"}})],1),e._v(" "),n("button",{staticClass:"button is-primary is-medium",on:{click:e.copyCaption}},[e._v("Copy to clipboard")]),e._v(" "),n("b-notification",{attrs:{active:e.notification.success,type:"is-success"}},[e._v("Copied to clipboard.")]),e._v(" "),n("b-notification",{attrs:{active:e.notification.failed,type:"is-danger"}},[e._v("Copy failed.")])]:e._e()],2)},[],!1,null,"859c1512",null);t.default=component.exports}}]);